#!/usr/bin/env node
import s from"prompts";import m from"tiged";import n from"chalk";const c="promonkeyli/program-template",i=[{name:"mobile-taro",description:"This a mobile-taro project template",repoPath:`${c}/frontend/mobile-taro`},{name:"admin-react",description:"This a admin-react project template",repoPath:`${c}/frontend/admin-react`}],u=i.map(e=>({title:e.name,description:e.description,value:e.name})),l=async(e,a)=>{const t=i.find(o=>o.name===e)?.repoPath;if(!t)throw new Error(`\u6A21\u7248 ${e} \u4E0D\u5B58\u5728`);console.log(n.blue(`\u6B63\u5728\u62C9\u53D6\u6A21\u7248: ${t}...`));const r=m(t,{disableCache:!0,force:!0,verbose:!1});try{await r.clone(a),console.log(n.green("\u2714 \u6A21\u7248\u62C9\u53D6\u6210\u529F"))}catch(o){throw console.error(n.red(`\u2716 \u6A21\u7248\u62C9\u53D6\u5931\u8D25: ${o.message}`)),o}};async function p(){try{const e=await s([{type:"text",name:"projectName",message:"What is the name of project ?",validate:o=>d(o)||"Invalid project name"},{type:"select",name:"template",message:"Pick a project template",choices:u,initial:0}]),{projectName:a,template:t}=e,r=`${process.cwd()}/${a}`;console.log(a,t,r),l(t,r)}catch(e){console.error(e)}}function d(e){return/^(?:@[a-z\d\-*~][a-z\d\-*._~]*\/)?[a-z\d\-~][a-z\d\-._~]*$/.test(e)}p().catch(e=>{console.error(e)});
